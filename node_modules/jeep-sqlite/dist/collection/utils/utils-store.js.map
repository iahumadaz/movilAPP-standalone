{"version":3,"file":"utils-store.js","sourceRoot":"","sources":["../../src/utils/utils-store.ts"],"names":[],"mappings":"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","sourcesContent":["export class UtilsStore {\n  static async getDBFromStore(dbName: string, store: LocalForage): Promise<Uint8Array> {\n    try {\n      const retDb: Uint8Array = await store.getItem(dbName);\n      return Promise.resolve(retDb);\n    } catch (err) {\n      return Promise.reject(`GetDBFromStore: ${err.message}`);\n    }\n  }\n  static async setInitialDBToStore(dbName: string, store: LocalForage): Promise<void> {\n    try {\n      // export the database\n      const data = null;\n      // store the database\n      await store.setItem(dbName, data);\n      return Promise.resolve();\n    } catch (err) {\n      return Promise.reject(`SetInitialDBToStore: ${err.message}`);\n    }\n  }\n  static async setDBToStore(mDb: any, dbName: string, store: LocalForage): Promise<void> {\n    try {\n      // export the database\n      const data: Uint8Array = mDb.export();\n      // store the database\n      await UtilsStore.saveDBToStore(dbName, data, store);\n\n      return Promise.resolve();\n    } catch (err) {\n      return Promise.reject(`SetDBToStore: ${err.message}`);\n    }\n  }\n  static async saveDBToStore(dbName: string, data: Uint8Array, store: LocalForage): Promise<void> {\n    try {\n      // store the database\n      await store.setItem(dbName, data);\n      return Promise.resolve();\n    } catch (err) {\n      return Promise.reject(`SaveDBToStore: ${err.message}`);\n    }\n  }\n  static async removeDBFromStore(dbName: string, store: LocalForage): Promise<void> {\n    try {\n      await store.removeItem(dbName);\n      return Promise.resolve();\n    } catch (err) {\n      return Promise.reject(`RemoveDBFromStore: ${err.message}`);\n    }\n  }\n  static async isDBInStore(dbName: string, store: LocalForage): Promise<boolean> {\n    try {\n      const retDb: Uint8Array = await store.getItem(dbName);\n      if(retDb != null && retDb.length > 0) {\n        return Promise.resolve(true);\n      } else {\n        return Promise.resolve(false);\n      }\n  } catch (err) {\n      return Promise.reject(`IsDBInStore: ${err}`);\n    }\n  }\n  static async restoreDBFromStore(dbName: string, prefix: string, store: LocalForage): Promise<void> {\n    const mFileName = `${prefix}-${dbName}`;\n    try {\n      // check if file exists\n      const isFilePre: boolean = await UtilsStore.isDBInStore(mFileName, store);\n      if (isFilePre) {\n        const isFile: boolean = await UtilsStore.isDBInStore(dbName, store);\n        if (isFile) {\n          const retDb = await UtilsStore.getDBFromStore(mFileName, store);\n          await UtilsStore.saveDBToStore(dbName, retDb, store);\n          await UtilsStore.removeDBFromStore(mFileName, store);\n          return Promise.resolve();\n        } else {\n          return Promise.reject(\n            new Error(`RestoreDBFromStore: ${dbName} does not exist`));\n        }\n      } else {\n        return Promise.reject(\n          new Error(`RestoreDBFromStore: ${mFileName} does not exist`));\n      }\n    } catch (err) {\n      return Promise.reject(`RestoreDBFromStore: ${err.message}`);\n    }\n  }\n  static async copyDBToStore(dbName: string, toDb: string, store: LocalForage): Promise<void> {\n    try {\n      // check if file exists\n      const isFile: boolean = await UtilsStore.isDBInStore(dbName, store);\n      if (isFile) {\n        const retDb = await UtilsStore.getDBFromStore(dbName, store);\n        await UtilsStore.saveDBToStore(toDb, retDb, store);\n        return Promise.resolve();\n      } else {\n        return Promise.reject(\n          new Error(`CopyDBToStore: ${dbName} does not exist`));\n      }\n    } catch (err) {\n      return Promise.reject(`CopyDBToStore: ${err.message}`);\n    }\n  }\n  static async getDBListFromStore(store: LocalForage): Promise<string[]> {\n    try {\n      const retDbList: string[] = await store.keys();\n      return Promise.resolve(retDbList);\n    } catch (err) {\n      return Promise.reject(`GetDBListFromStore: ${err.message}`);\n    }\n  }\n}\n"]}